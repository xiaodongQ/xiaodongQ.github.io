---
layout: post
title: 数字货币交易初体验
categories: 区块链
tags: 区块链 数字货币
---

* content
{:toc}

记第一次数字货币交易记录。



## 数字货币交易初体验

### 背景

之前看大龄程序员老炮响马的微博，忘了什么原因关注的了，后面突然风生水起做起了区块链，发布了FO(斐波币)。  
那时对于数字货币、区块链只是听过并不了解，然后就查了一下相关的概念，一些术语流程。当时对于买币也没什么概念，而且FO还要用js写代码去兑换，折腾了一下官网的demo，半吊子都算不上的js水平最终以失败告终，不过留下了一点对于区块链的火花。

另外初识了一下OKEx，偶尔也会看下比特币、EOS等的情况。但是懒人一个不会一直关注着。

昨天(10月25日)习大大说要推进区块链技术和产业发展，迅雷股价j一夜翻倍，各个数字货币也是应声而涨，前几天还稳中有降来着。。。

这就是我关于区块链微末的联系。总是觉得不参与不上心就不会有那么些丝丝缕缕的联系。所以有了今天的初体验。

忘记看得是韩寒还是村上春树的书里写的，正是这些接触参与过的细微联系不停地融入自己的世界和三观，才发生化学作用成为了什么样的自己。表达得不好，翻了下没找到原话orz。

### 过程

### app下载

大概看了一下数字货币交易，暂时下了这些手机app

* app
    - 查询行情的APP：Mytoken
    - 数字资产钱包APP：imToken
    - 交易所APP：OKEX

注册完Mytoken，看有个活动链接，又下了个 24币行(24MEX ，也是个交易所)，买多少币送多少，注册充值一看送的都在红包里，只能用作交易时抵手续费。。

### 买币

在24MEX里买入了一些USDT。这里面要充值买多少USDT，下单后平台会派给个人。支付宝支付的链接都是个人的号(这里返回确认来回了好几次，因为个人转账确实之前各种骗局)。

输入金额，转账，纠结账号上货币个数怎么还没增加，咨询客服。。

终于到了。

### 提币

感觉24MEX app操作不好用，我是Android的，返回键没有效果。

币就放在这里也行，不过自己还是想在统一的钱包里管理起来。于是提币到imToken(需要把币种对应的钱包地址复制到转出地址中)。

发送提币申请交易后，又是各种看来看去怎么还没到账，然后就涉及到一些有意思的交易过程，也是后面需要学习了解的技术知识。

* 咨询客服为什么还没到账的答复：

>具体到账时间要看链上区块确认速度。 区块网络速度正常时，一般1个区块1-15分钟。如果堵了，时间就不确定了，2-3天都有可能的。 https://www.omniexplorer.info 这个网站可以查看USDT区块情况的，您用哈希值可以直接查看。 提币提示需6个确认情况——转币一般至少要6个确认才能到账使用，我们交易所是1个确认优先 给您到账，实际到账所以提币需等待6个确认完成哦。

意思是可以通过交易的交易ID(TxID)到 https://www.omniexplorer.info 中查询这笔交易相关的区块信息。

* OMNI协议
    - OMNI使用的是基于比特币区块链技术 
    - [OMNI协议介绍](https://blog.csdn.net/xq723310/article/details/82684595)
    - [omni协议发代币的通俗解释](https://zhuanlan.zhihu.com/p/40062558)
    - USDT有两种不同类型，两种分别的协议(本次交易里是用OMNI) [omni和erc20的区别](https://www.php.cn/faq/423657.html)

* 关于OmniExplorer:
    - 参考：[OmniExplorer FAQ](https://github.com/OmniLayer/omniexplorer/wiki/OmniExplorer-FAQ)
    - OmniExplorer是Omni协议的块资源管理器，由Omni基金会创建和维护
    - 目前，它允许您查询Omni协议上的地址余额和交易数据。随着时间的流逝，可能会添加其他统计信息，信息，工具来帮助社区。

* 关于6个(区块)确认，是指比特币转账需要6个区块确认才能到账
    - 为了避免双花造成的损失，一般认为，等 6 个区块确认后的比特币交易基本上就不可篡改了
    - 参考：[比特币转账为什么一定要等6个区块确认才能到账？](https://www.jianshu.com/p/2da3a9970387)

* 关于"我们交易所是1个确认优先"
    - 交易所确认后才流入到区块链中进行计算打包确认的链式处理

* 这是交易所里的订单信息：

```
币种            USDT
提币地址        1Q9xxxxxxxxxxxx...rVCqMQWxT (要提取到的钱包地址)
转出数量        xx.00 USDT
手续费          5.00 USDT
到账数量        xx.00 USDT
提币时间        2019-10-26 15:45:09
完成时间        2019-10-26 17:52:00
订单号          42b2xxx...63b
TxID           25cfa021d27............e69146e87 (64位哈希值，TxID是要24MEX交易所先确认后才会生成，之前状态为未确认)
订单状态       （1/6确认）已完成
```

* TxID放到omniexplorer里查询区块信息

可以看到界面上的状态，基于以下json数据展示(0/6时候的展示)：

```json
{
  "amount": "xx.00000000", 
  "blocktime": 1572082564, 
  "confirmations": 0, 
  "divisible": true, 
  "fee": "0.00012850", 
  "flags": null, 
  "ismine": false, 
  "propertyid": 31, 
  "propertyname": "TetherUS", 
  "referenceaddress": "1Q9hh...",  // 目的钱包地址
  "sendingaddress": "1BqsoHo...",  // 源钱包地址？
  "txid": "25cfa021d27...",        // TxID，哈希值
  "type": "Simple Send", 
  "type_int": 0, 
  "version": 0
}
```

5/6时候的展示：

```json
{
  "amount": "xx.00000000", 
  "block": 601115, 
  "blockhash": "0000000000000000000f99895843a60a5e610324e8f81312faaabcf690de5612", 
  "blocktime": 1572083500, 
  "confirmations": 5, 
  "divisible": true, 
  "fee": "0.00012850", 
  "flags": null, 
  "ismine": false, 
  "positioninblock": 707, 
  "propertyid": 31, 
  "propertyname": "TetherUS", 
  "referenceaddress": "1Q9hhC...", 
  "sendingaddress": "1BqsoH...", 
  "txid": "25cfa021d27...",        // TxID，哈希值
  "type": "Simple Send", 
  "type_int": 0, 
  "valid": true, 
  "version": 0
}
```

24MEX交易所显示6/6，imToken钱包也收到转账了(收到0.00000000xxx个BTC，0有点多。。。)，
(几百块钱提取，看imToken上只有几毛钱orz，然后看钱包状态还是确认中。。。吓一跳，坐等。。。。。。收到部分还不算完全结束)

此时在 omniexplorer 里的状态(此时confirmations是7)

```json
{
  "amount": "xx.00000000", 
  "block": 601115, 
  "blockhash": "0000000000000000000f99895843a60a5e610324e8f81312faaabcf690de5612", 
  "blocktime": 1572083500, 
  "confirmations": 7, 
  "divisible": true, 
  "fee": "0.00012850", 
  "flags": null, 
  "ismine": false, 
  "positioninblock": 707, 
  "propertyid": 31, 
  "propertyname": "TetherUS", 
  "referenceaddress": "1Q9hhC...", 
  "sendingaddress": "1BqsoHo...", 
  "txid": "25cfa021d27dd8...", 
  "type": "Simple Send", 
  "type_int": 0, 
  "valid": true, 
  "version": 0
}
```

### 存疑

还存在的一些疑问，留待确认。

看接收提币的钱包中(imToken)，这笔转入点进去可以看详情：

* 其中有一个inputs，3个outputs
    - inputs 是 源钱包地址 
    - outpus 中除了目的钱包地址，还有源钱包地址，另外包括个 0 BTC的记录，此处有疑问， why？
    - inputs 中的币大小，是0.117....BTC(8位小数)，明细比提取的币数大很多，why？

* 目的钱包是否是多次收款，哪个状态标识终态？